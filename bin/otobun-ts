#!/usr/bin/env bash
# otobun-ts â€” TypeScript/Ink TUI for dotfiles management
# Requires: npm install (run once in cmd/otobun-ts/)

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DOTFILES_DIR="$(dirname "$SCRIPT_DIR")"
TS_DIR="$DOTFILES_DIR/cmd/otobun-ts"
TSX="$TS_DIR/node_modules/.bin/tsx"

if [ ! -f "$TSX" ]; then
  echo "Dependencies not installed. Running npm install..."
  npm install --prefix "$TS_DIR" --silent
fi

exec "$TSX" "$TS_DIR/src/index.tsx" "$@"
