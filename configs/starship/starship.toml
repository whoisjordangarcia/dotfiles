add_newline = true
command_timeout = 200
format = "${custom.dir_display}${custom.git_worktree}$git_branch$git_status$character"

[custom.dir_display]
when = "! test -f .git"
command = """
repo=$(git rev-parse --show-toplevel 2>/dev/null)
if [ -n "$repo" ]; then
  root=$(basename "$repo")
  prefix=$(git rev-parse --show-prefix 2>/dev/null)
  if [ -n "$prefix" ]; then
    echo "${root}/${prefix%/}"
  else
    echo "$root"
  fi
else
  echo "${PWD##*/}"
fi
"""
shell = ["bash", "--noprofile", "--norc"]
format = "[$output]($style) "
style = "bold cyan"
description = "Shows directory only when not in a git worktree"

[custom.git_worktree]
command = "printf '\\xef\\x81\\xac'"
when = "test -f .git"
shell = ["bash", "--noprofile", "--norc"]
format = "[$output]($style) "
style = "green"
description = "Shows leaf icon when in a git worktree"

[character]
error_symbol = "[✗](bold cyan)"
success_symbol = "[❯](bold cyan)"

[git_branch]
symbol = " "
format = "[$symbol]($style)[$branch](italic cyan)"
style = "cyan"

[git_status]
format = '[$all_status]($style) '
style = "cyan"
ahead = "⇡${count} "
diverged = "⇕⇡${ahead_count}⇣${behind_count} "
behind = "⇣${count} "
conflicted = "  "
up_to_date = "  "
untracked = " ? "
modified = "  "
stashed = ""
staged = ""
renamed = ""
deleted = ""
